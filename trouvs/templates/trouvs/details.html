{% extends 'base.html' %}

{% block body %}
<div class='row order-1'>
    <div class='col lg-10 mb-4 mt-4'>
        <div class='card'>
            <div class='d-flex align-items-end row'>
                <div class='col-sm-7'>
                    <div class='card-body'>
                        <h3 class='card-title text-primary'>Fiche idée !</h3>
                        <p class='mb-4'>Ici se trouve la fiche d'informations de l'idée <em>{{ trouv.titre }}</em>.<br>
                            Dans le premier onglet, vous pouvez lire l'idée. Dans le second, vous pouvez consulter
                            les informations de l'idée, comme le nom du créateur ou sa date de création.<br>
                            N'oubliez pas de voter positivement (ou négativement !) pour cette idée une fois avoir
                            fini de le lire !</p>
                    </div>
                </div>
                <div class='col-sm-5 text-center text-sm-left'>
                    <div class='card-body pb-0 px-0 px-md-4'>
                        <img src='assets/img/illustrations/girl-doing-yoga-light.png' height='140'
                             alt='View Badge User' data-app-dark-img='illustrations/man-with-laptop-dark.png'
                             data-app-light-img='illustrations/man-with-laptop-light.png'>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class='col-xl-6 order-1'>
        <h4 class='text-primary'>{{ trouv.titre }}</h4>
        <h5><em>Produit : <a href='?page=idees&ext=php&id=" . $produit[' id'] . "'>" . $produit['titre'] . "</a>
        </em></h5>
        <div class='nav-align-top mb-4'>
            <ul class='nav nav-tabs' role='tablist'>
                <li class='nav-item'>
                    <button type='button' class='nav-link active' role='tab' data-bs-toggle='tab'
                            data-bs-target='#navs-top-home' aria-controls='navs-top-home' aria-selected='true'>
                        Général
                    </button>
                </li>
                <li class='nav-item'>
                    <button type='button' class='nav-link' role='tab' data-bs-toggle='tab'
                            data-bs-target='#navs-top-profile' aria-controls='navs-top-profile'
                            aria-selected='false'>
                        Informations
                    </button>
                </li>
            </ul>
            <div class='tab-content'>
                {% comment %}<div class='row mb-3'>
                        <div class='col col-lg-10'>
                            <div class='btn-group' role='group' aria-label='Basic example'>
                                <a href='?page=idee&ext=php&id=" . $id . "&vote="; if ($resultat[' vote_createur'] == 1)
                                echo '-1'; else echo '1'; echo "'>
                                <button
                                        id='pour'
                                        type='button'
                                        class='btn btn-outline-secondary'
                                ";
                                if ($resultat['vote_createur'] == 1) echo " disabled";
                                echo ">".
                                " ▲ "; if ($resultat['brouillon']) echo '--'; else echo $resultat['nb_pour'];
                                echo "</button>
                                </a>
                                <a href='?page=idee&ext=php&id=" . $id . "&vote="; if ($resultat[' vote_createur'] == 0
                                && $resultat['vote_createur'] != null) echo '-1'; else echo '0'; echo "'>
                                <button
                                        id='contre'
                                        type='button'
                                        class='btn btn-outline-secondary'
                                ";
                                if ($resultat['vote_createur'] == 0 && $resultat['vote_createur'] != null) echo "
                                disabled";
                                echo ">".
                                " ▼ "; if ($resultat['brouillon']) echo '--'; else echo $resultat['nb_contre'];
                                echo "</button>
                                </a>
                            </div>
                        </div>
                        "; //Si l'utilisateur peut supprimer l'idée, l'option lui est proposé :
                        if ($peutSupprimer) echo
                        "
                        <div class='col-lg-2'>
                            <a class='dropdown-item' href='?page=supp-idee&ext=php&id=" . $id . "'><i
                                    class='bx bx-trash me-1'></i></a>
                        </div>
                        ";
                        echo "
                    </div>{% endcomment %}
                <div class='tab-pane fade show active' id='navs-top-home' role='tabpanel'>
                    <!-- Contenu -->
                    {{ trouv.description }}
                    {% if trouv.fichierstrouv_set %}
                        <p class='mt-3 mb-0'><em>Fichiers liés à l'idée :</em></p>
                        <ul>
                            {% for fichier in trouv.fichierstrouv_set %}
                                <li>
                                    <a href='fichiers/{{ fichier.fichier.name }}'
                                       download>{{ fichier.fichier.name }}</a>
                                </li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                </div>
                <div class='tab-pane fade' id='navs-top-profile' role='tabpanel'>
                    <h5 class='mb-0'>Créateur :</h5>
                    <a href='compte/{{ trouv.utilisateur.id }}'>{{ trouv.utilisateur.user.username }}</a>
                    <h5 class='mb-0 mt-3'>Date de publication de l'idée :</h5>
                    <p>{{ trouv.date_creation }}</p>
                    <h5 class='mb-0'>Date de dernière modification :</h5>
                    <p>
                        {% if trouv.date_modification %}
                            {{ trouv.date_modification }}
                        {% else %}
                            <em>Jamais modifé !</em>
                        {% endif %}
                    </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}